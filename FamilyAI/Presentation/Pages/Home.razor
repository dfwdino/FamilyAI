@page "/"

@using FamilyAI.Domain.Models
@using FamilyAI.Infrastructure.Services
@using FamilyAI.Presentation.Layout

@inject UserServcies _userServices




<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>
Welcome to your new app.
<br />
<br />
<div> Sign in</div>

<div id="choreForm">
<EditForm Model="_usermodel" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3">
        <label class="form-label">Chore Name</label>
        <InputText class="form-control" @bind-Value="_usermodel.Username" />
    </div>
    <div class="mb-3">
        <label class="form-label">Price</label>
            <InputText class="form-control" @bind-Value="_usermodel.Password" />
    </div>
    <button type="submit" class="btn btn-success" ></button>
   
</EditForm>
</div>

<br/>

<div><a href="AdminLayout">Admin Layout</a></div>
<br />
<div> User Layout</div>


@code{
    UserModel _usermodel = new();

    private async Task HandleValidSubmit()
    {
        if(_usermodel != null)
        {
            var result = await _userServices.SignIn(_usermodel);
            if(result != null)
            {
                Console.WriteLine("Sign in successful");
            }
            else
            {
                Console.WriteLine("Sign in failed");
            }
        })
        
    }
}